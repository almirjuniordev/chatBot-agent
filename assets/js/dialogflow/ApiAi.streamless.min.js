/**
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
 
var ApiAi=function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="/target/",__webpack_require__(__webpack_require__.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){var t;!function(e){e[e.EN="en"]="EN",e[e.DE="de"]="DE",e[e.ES="es"]="ES",e[e.PT_BR="pt-BR"]="PT_BR",e[e.ZH_HK="zh-HK"]="ZH_HK",e[e.ZH_CN="zh-CN"]="ZH_CN",e[e.ZH_TW="zh-TW"]="ZH_TW",e[e.NL="nl"]="NL",e[e.FR="fr"]="FR",e[e.IT="it"]="IT",e[e.JA="ja"]="JA",e[e.KO="ko"]="KO",e[e.PT="pt"]="PT",e[e.RU="ru"]="RU",e[e.UK="uk"]="UK"}(t=e.AVAILABLE_LANGUAGES||(e.AVAILABLE_LANGUAGES={})),e.VERSION="2.0.0-beta.18",e.DEFAULT_BASE_URL="https://api.api.ai/v1/",e.DEFAULT_API_VERSION="20150910",e.DEFAULT_CLIENT_LANG=t.EN,e.DEFAULT_TTS_HOST="https://api.api.ai/api/tts"}(t.ApiAiConstants||(t.ApiAiConstants={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function ApiAiBaseError(t){var n=e.call(this,t)||this;return n.message=t,n.stack=(new Error).stack,n}return r(ApiAiBaseError,e),ApiAiBaseError}(Error);t.ApiAiBaseError=i;var o=function(e){function ApiAiClientConfigurationError(t){var n=e.call(this,t)||this;return n.name="ApiAiClientConfigurationError",n}return r(ApiAiClientConfigurationError,e),ApiAiClientConfigurationError}(i);t.ApiAiClientConfigurationError=o;var s=function(e){function ApiAiRequestError(t,n){void 0===n&&(n=null);var r=e.call(this,t)||this;return r.message=t,r.code=n,r.name="ApiAiRequestError",r}return r(ApiAiRequestError,e),ApiAiRequestError}(i);t.ApiAiRequestError=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(3),o=function(){function Request(e,t){this.apiAiClient=e,this.options=t,this.uri=this.apiAiClient.getApiBaseUrl()+"query?v="+this.apiAiClient.getApiVersion(),this.requestMethod=i.default.Method.POST,this.headers={Authorization:"Bearer "+this.apiAiClient.getAccessToken()},this.options.lang=this.apiAiClient.getApiLang(),this.options.sessionId=this.apiAiClient.getSessionId()}return Request.handleSuccess=function(e){return Promise.resolve(JSON.parse(e.responseText))},Request.handleError=function(e){var t=new r.ApiAiRequestError(null);try{var n=JSON.parse(e.responseText);t=n.status&&n.status.errorDetails?new r.ApiAiRequestError(n.status.errorDetails,n.status.code):new r.ApiAiRequestError(e.statusText,e.status)}catch(n){t=new r.ApiAiRequestError(e.statusText,e.status)}return Promise.reject(t)},Request.prototype.perform=function(e){void 0===e&&(e=null);var t=e||this.options;return i.default.ajax(this.requestMethod,this.uri,t,this.headers).then(Request.handleSuccess.bind(this)).catch(Request.handleError.bind(this))},Request}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function XhrRequest(){}return XhrRequest.ajax=function(e,t,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i={}),new Promise(function(o,s){var u=XhrRequest.createXMLHTTPObject(),a=t,_=null;if(n&&e===XhrRequest.Method.GET){a+="?";var p=0;for(var c in n)n.hasOwnProperty(c)&&(p++&&(a+="&"),a+=encodeURIComponent(c)+"="+encodeURIComponent(n[c]))}else n&&(r||(r={}),r["Content-Type"]="application/json; charset=utf-8",_=JSON.stringify(n));for(var c in i)c in u&&(u[c]=i[c]);if(u.open(XhrRequest.Method[e],a,!0),r)for(var c in r)r.hasOwnProperty(c)&&u.setRequestHeader(c,r[c]);_?u.send(_):u.send(),u.onload=function(){u.status>=200&&u.status<300?o(u):s(u)},u.onerror=function(){s(u)}})},XhrRequest.get=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r={}),XhrRequest.ajax(XhrRequest.Method.GET,e,t,n,r)},XhrRequest.post=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r={}),XhrRequest.ajax(XhrRequest.Method.POST,e,t,n,r)},XhrRequest.put=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r={}),XhrRequest.ajax(XhrRequest.Method.PUT,e,t,n,r)},XhrRequest.delete=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r={}),XhrRequest.ajax(XhrRequest.Method.DELETE,e,t,n,r)},XhrRequest.createXMLHTTPObject=function(){for(var e=null,t=0,n=XhrRequest.XMLHttpFactories;t<n.length;t++){var r=n[t];try{e=r()}catch(e){continue}break}return e},XhrRequest}();r.XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new window.ActiveXObject("Msxml2.XMLHTTP")},function(){return new window.ActiveXObject("Msxml3.XMLHTTP")},function(){return new window.ActiveXObject("Microsoft.XMLHTTP")}],function(e){!function(e){e[e.GET="GET"]="GET",e[e.POST="POST"]="POST",e[e.PUT="PUT"]="PUT",e[e.DELETE="DELETE"]="DELETE"}(e.Method||(e.Method={}))}(r||(r={})),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(5))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(1),o=n(7),s=n(9),u=n(8);!function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(6));var a=n(0);t.ApiAiConstants=a.ApiAiConstants;var _=function(){function ApiAiClient(e){if(!e||!e.accessToken)throw new i.ApiAiClientConfigurationError("Access token is required for new ApiAi.Client instance");this.accessToken=e.accessToken,this.apiLang=e.lang||r.ApiAiConstants.DEFAULT_CLIENT_LANG,this.apiVersion=e.version||r.ApiAiConstants.DEFAULT_API_VERSION,this.apiBaseUrl=e.baseUrl||r.ApiAiConstants.DEFAULT_BASE_URL,this.sessionId=e.sessionId||this.guid(),this.streamClientClass=e.streamClientClass||null}return ApiAiClient.prototype.textRequest=function(e,t){if(void 0===t&&(t={}),!e)throw new i.ApiAiClientConfigurationError("Query should not be empty");return t.query=e,new s.default(this,t).perform()},ApiAiClient.prototype.eventRequest=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),!e)throw new i.ApiAiClientConfigurationError("Event name can not be empty");return n.event={name:e,data:t},new o.EventRequest(this,n).perform()},ApiAiClient.prototype.ttsRequest=function(e){if(!e)throw new i.ApiAiClientConfigurationError("Query should not be empty");return new u.TTSRequest(this).makeTTSRequest(e)},ApiAiClient.prototype.createStreamClient=function(e){if(void 0===e&&(e={}),this.streamClientClass)return e.token=this.getAccessToken(),e.sessionId=this.getSessionId(),e.lang=this.getApiLang(),new this.streamClientClass(e);throw new i.ApiAiClientConfigurationError("No StreamClient implementation given to ApiAi Client constructor")},ApiAiClient.prototype.getAccessToken=function(){return this.accessToken},ApiAiClient.prototype.getApiVersion=function(){return this.apiVersion?this.apiVersion:r.ApiAiConstants.DEFAULT_API_VERSION},ApiAiClient.prototype.getApiLang=function(){return this.apiLang?this.apiLang:r.ApiAiConstants.DEFAULT_CLIENT_LANG},ApiAiClient.prototype.getApiBaseUrl=function(){return this.apiBaseUrl?this.apiBaseUrl:r.ApiAiConstants.DEFAULT_BASE_URL},ApiAiClient.prototype.setSessionId=function(e){this.sessionId=e},ApiAiClient.prototype.getSessionId=function(){return this.sessionId},ApiAiClient.prototype.guid=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},ApiAiClient}();t.ApiAiClient=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){!function(e){e[e.ERR_NETWORK=0]="ERR_NETWORK",e[e.ERR_AUDIO=1]="ERR_AUDIO",e[e.ERR_SERVER=2]="ERR_SERVER",e[e.ERR_CLIENT=3]="ERR_CLIENT"}(e.ERROR||(e.ERROR={}));!function(e){e[e.MSG_WAITING_MICROPHONE=0]="MSG_WAITING_MICROPHONE",e[e.MSG_MEDIA_STREAM_CREATED=1]="MSG_MEDIA_STREAM_CREATED",e[e.MSG_INIT_RECORDER=2]="MSG_INIT_RECORDER",e[e.MSG_RECORDING=3]="MSG_RECORDING",e[e.MSG_SEND=4]="MSG_SEND",e[e.MSG_SEND_EMPTY=5]="MSG_SEND_EMPTY",e[e.MSG_SEND_EOS_OR_JSON=6]="MSG_SEND_EOS_OR_JSON",e[e.MSG_WEB_SOCKET=7]="MSG_WEB_SOCKET",e[e.MSG_WEB_SOCKET_OPEN=8]="MSG_WEB_SOCKET_OPEN",e[e.MSG_WEB_SOCKET_CLOSE=9]="MSG_WEB_SOCKET_CLOSE",e[e.MSG_STOP=10]="MSG_STOP",e[e.MSG_CONFIG_CHANGED=11]="MSG_CONFIG_CHANGED"}(e.EVENT||(e.EVENT={}))}(t.IStreamClient||(t.IStreamClient={}))},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){function EventRequest(){return null!==e&&e.apply(this,arguments)||this}return r(EventRequest,e),EventRequest}(i.default);t.EventRequest=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),s=n(3),u=n(2),a=function(e){function TTSRequest(t,n){void 0===n&&(n={});var r=e.call(this,t,n)||this;r.apiAiClient=t,r.resolveTTSPromise=function(e){return r.speak(e.response)},r.rejectTTSPromise=function(e){throw new o.ApiAiRequestError(e)},r.uri=i.ApiAiConstants.DEFAULT_TTS_HOST;var s=window.AudioContext||webkitAudioContext;return TTSRequest.audioContext||(TTSRequest.audioContext=new s),r}return r(TTSRequest,e),TTSRequest.prototype.makeTTSRequest=function(e){if(!e)throw new o.ApiAiClientConfigurationError("Request can not be empty");var t={lang:"en-US",text:encodeURIComponent(e),v:this.apiAiClient.getApiVersion()},n={"Accept-language":"en-US",Authorization:"Bearer "+this.apiAiClient.getAccessToken()};return this.makeRequest(this.uri,t,n,{responseType:TTSRequest.RESPONSE_TYPE_ARRAYBUFFER}).then(this.resolveTTSPromise).catch(this.rejectTTSPromise.bind(this))},TTSRequest.prototype.makeRequest=function(e,t,n,r){return s.default.get(e,t,n,r)},TTSRequest.prototype.speak=function(e){var t=this;return e.byteLength?new Promise(function(n,r){TTSRequest.audioContext.decodeAudioData(e,function(e){return t.playSound(e,n)},r).then(null,function(e){return r(e)})}):Promise.reject("TTS Server unavailable")},TTSRequest.prototype.playSound=function(e,t){var n=TTSRequest.audioContext.createBufferSource();n.buffer=e,n.connect(TTSRequest.audioContext.destination),n.onended=t,n.start(0)},TTSRequest}(u.default);a.RESPONSE_TYPE_ARRAYBUFFER="arraybuffer",t.TTSRequest=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(e){function TextRequest(){return null!==e&&e.apply(this,arguments)||this}return r(TextRequest,e),TextRequest}(i.default);t.default=o},function(e,t,n){e.exports=n(4)}]);